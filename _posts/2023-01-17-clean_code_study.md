---
title:  "Clean Code 책 정리"
excerpt: "Clean Code 책을 읽고 내용을 정리해보았다"

categories:
  - Book
tags:
  - Clean Code
  - Java
last_modified_at: 2023-01-17 
toc: true
toc_label: "Contents"
toc_icon: "cog"
toc_sticky: true
---

---

### Clean Code 책을 선택한 이유

![클린코드](https://user-images.githubusercontent.com/54565079/213316914-f73f3177-389c-4b32-9df1-461f1914e752.jpg)

제목을 보고 본능적으로 끌렸던 것 같다. 어느 언어, 기술, 프레임워크를 접하든 개발을 하는 사람이라면 코드는 계속 보고 작성할 수 밖에 없다. 내 경험상 개인프로젝트를 할 때는 정해진 기한이 없는 경우가 많아서 마음의 여유가 있고 그래서 중간에 코드를 리팩토링 하거나 원하는 방식으로 주석을 다는 방식으로 코드의 방식에 대한 고민이 별로 없었다. 하지만 협업을 하다보면 제한된 프로젝트 기한이 주는 촉박함도 있고 같이 협업하는 사람과의 코드 작성 방식의 차이도 존재하다보니 개발을 하면 할수록 소위 말해 '개판'이 되기가 쉬운 것 같다. 프로젝트 내에 코드의 일관성도 줄어들고 프로젝트가 고도화될 수록 다른 사람의 코드는 물론이고 내 코드를 해석하는 것도 점점 시간이 오래걸리면서 생산성이 갈수록 떨어지는 것 같다. 이런 경험을 하고 나니 이 책의 제목을 보고 목차를 본 순간 무조건 읽어야 한다는 생각이 들었던 것 같다. 



#### 목차

1. [깨끗한 코드](#1-깨끗한-코드)
2. [의미 있는 이름](#2-의미-있는-이름)
3. [함수](#3-함수)
4. [주석](#4-함수)
5. 형식 맞추기
6. 객체와 자료구조
7. 오류 처리
8. 경계
9. 단위 테스트
10. 클래스
11. 시스템
12. 창발성
13. 동시성
14. 점진적인 개선
15. JUnit
16. SerialDate 리팩터링
17. 냄새와 휴리스틱



### 1. 깨끗한 코드

#### Clean Code란

클린 코드의 정의는 아마 개발자의 수만큼이나 정의도 다양할거라고 생각한다. 아래는 세계적인 개발자들이 정의한 '클린 코드'이다. 

- Bjarne Stroustrup(C++ 창시자) : 우아하고 효율적인 코드이다. 논리가 간단해야 버그가 숨어들지 못한다. 의존성을 최대한 줄여야 유지보수가 쉬워진다. 깨끗한 코드는 한가지를 제대로 한다. 
  - 효율 강조
- Grady Booch(UML 개발자) : 깨끗한 코드는 단순하고 직접적이다. 깨끗한 코드는 잘 쓴 문장처럼 읽힌다. 깨끗한 코드는 설계자의 의도를 숨기지 않는다. 오히려 명쾌한 추상화와 단순한 제어문으로 가득하다. 
  - 가독성 강조
- Dave Thomas(OTI 창립자) : 깨끗한 코드는 작성자가 아닌 사람도 읽기 쉽고 고치기 쉽다. 단위 테스트 케이스와 인수 테스트 케이스가 존재한다. 깨끗한 코드에는 의미있는 이름이 붙는다. 특정 목적을 달성하는 방법은 하나만 제공한다. 의존성은 최소이며 각 의존성을 명확히 정의한다. 
  - 가독성 강조, TDD(Test Driven Development) 강조
- Michael Feathers(레거시 코드 활용 전략 저자) : 깨끗한 코드는 언제나 주의 깊게 짰다는 느낌을 준다. 고치려고 살펴봐도 딱히 손 댈 곳이 없다. 작성자가 이미 모든 사항을 고려했기 때문에 고칠 궁리를 하다 보면 언제나 제자리로 돌아온다. 
  - 주의를 기울인 코드 강조 
- Ron Jeffries(Extreme Programming 개발 방법론 창시자) : 나는 주로 중복에 집중한다. 같은 작업을 여러 차례 반복한다면 코드가 아이디어를 제대로 표현하지 못한다는 증거다. 나는 문제의 아이디어를 찾아내 좀 더 명확하게 표현하려 애쓴다. 집합을 추상화 하면 '진짜' 문제에 신경 쓸 여유가 생긴다. 
  - 중복을 피하고 추상화된 코드 강조

- Ward Cunningham(Wiki 창시자) : 코드를 읽으면서 짐작했던 기능을 그대로 수행한다면 깨끗한 코드이다. 
  - 명백하고 단순한 코드 강조




#### 보이스카우트 규칙

- '캠프장은 처음 왔을 때보다 더 깨끗하게 해놓고 떠나라'
  - 코드는 시간이 지나도 언제나 깨끗하게 유지해야 한다
  - 체크아웃 할 때 보다 깨끗한 코드를 확인한다면 코드는 절대 나빠지지 않는다
  - 한꺼번에 많은 시간과 노력을 투자해 코드를 정리할 필요가 없다 (변수 이름 하나 개선, 긴 함수 하나 분할, 복잡한 if문 하나 제거 등)



### 2. 의미 있는 이름

프로그래머는 코드를 최대한 이해하기 쉽게 짜야 한다. 집중적인 탐구가 필요한 코드가 아닌 대충 훑어봐도 이해할 코드 작성을 목표로 해야 한다. 그러기 위해서는 변수의 이름을 신중하게 결정할 필요가 있다. 소프트웨어에서 이름은 어디에나 쓰인다. 변수, 함수, 인수와 클래스, 패키지, 소스파일, jar/war 파일 등에도 이름을 붙인다. 그렇기 때문에 이름을 잘 지으면 여러모로 편하다. 



#### 의도 명확하게 하기

좋은 이름을 지으려면 시간이 걸리지만 좋은 이름으로 절약하는 시간이 훨씬 더 많다. 변수, 함수, 클래스 이름은 다음의 질문에 모두 답해야 한다. 

- 존재 이유
- 수행 기능
- 사용 방법

따로 주석이 필요하다면 의도를 분명히 드러내지 못했다는 말이다. 

~~~java
// 나쁜 예시
int d; 

// 좋은 예시
int elapsedTimeInDays;
int daysSinceCreation;
int daysSinceModification;
int fileAgeInDays;
~~~



#### 클래스 이름

클래스 이름과 객체 이름은 명사가 적합하다.



#### 메서드 이름

메서드 이름은 동사가 적합하다. 



#### 한 개념에 한 단어만 사용하기

추상적인 개념 하나에 단어 하나를 선택해 이를 고수해야 한다. 

> 예를 들어 똑같은 메서드를 클래스마다 fetch, retrieve, get으로 제각각 부르면 혼란스럽다. 요즘 에디터들은 좋은 메서드 이름을 자동으로 추천해주는 기능이 있다. 



#### 한 단어를 두가지 목적으로 사용하지 않기

같은 개념처럼 보여도 맥락이 다르다면 다른 단어를 사용해야 한다. 

> 예를 들어 add가 들어간 메서드들이 있다고 가정했을 때 어떤 add 메서드는 기존 값 두개를 더해서 새로운 값을 만들고 어떤 add는 집합에 값 하나를 추가하는 경우가 있다고 하자. 이 경우에는 add라는 단어의 맥락이 다르기 때문에 add 라는 단어가 아닌 insert나 append라는 단어로 구분할 필요가 있다. 



#### 의미있는 맥락 추가하기

클래스, 함수, 혹은 접두어 등에 맥락을 부여하는게 좋다.

> 예를 들어 firstName, lastName, street, houseNumber, city, state 라는 변수들을 훑어보면 주소라는 사실을 금방 알 수 있다. 하지만 어느 메서드가 state 변수 하나만 사용한다면 state가 주소를 의미하는지 알기 어렵다. addr라는 접두어를 추가해 addrFirstName, addrLastName, addrState라고 쓰면 맥락이 분명해진다. 다른 방법으로는 Address라는 클래스를 생성하는 방법도 좋다. 



### 3. 함수

어떤 프로그램이든 가장 기본적인 단위는 함수다. 함수를 잘 활용하면 가독성 있는 코드를 작성할 수 있다. 



#### 작게 만들기

함수는 길면 안된다. 최대 100줄을 넘겨서도 안된다. 중첩 구조가 생길만큼 함수가 커져서도 안된다. 그래야 함수는 읽고 이해하기 쉬워진다. 



#### 한가지만 하기

함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다. 함수가 한 가지만 하느지의 여부를 알 수 있는 방법은 함수의 이름을 지을 때 의미 있는 이름으로 다른 함수를 추출할 수 있다면 함수는 한 가지의 일을 하는게 아닌 것이다. 



#### 함수 인수

- 함수 인수의 가장 이상적인 개수는 0개(무항)이다. 그 다음은 1개이고 그 다음은 2개이다. 3개 이상은 가능한 피하는 편이 좋다. 인수가 많을 수록 이해하기 어려운 코드가 된다. 

- 함수 인수에 bool 값을 넘기는 것도 좋지 않다. 함수가 한꺼번에 여러가지 일을 한다고 말하는 것과 같다. 

- 인수가 2~3개 필요하다면 일부를 독자적인 클래스 변수로 선언할 수 있는지 확인하는게 좋다. 

- ```java
  Circle makeCircle(double x, double y, double radius);
  Circle makeCircle(Point center, double radius); // 가독성 향상
  ```



#### 부수효과를 일으키지 않기

함수에서 한가지를 하지 않고 몰래 다른 일을 하게 된다면 심각한 부작용을 가져올 수 있다. 함수로 넘어온 인수나 전역변수를 수정할 수도 있다. 많은 경우 시간적인 결합(temporal coupling)이나 순서 종속성(order dependency)를 초래한다. 



#### 명령과 조회를 분리하기

함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다. 객체 상태를 변경하거나 객체 정보를 반환하거나 둘 중 하나만 해야 한다. 두가지를 같이 하면 혼란을 초래하게 된다. 



#### Try/catch 사용하기

Try/catch를 사용하면 오류 처리 코드가 원래 코드에서 분리되어서 코드가 깔끔해진다. 적용한 try/catch 블록을 별도의 함수로 뽑아내면 더 좋다. 



#### 반복하지 않기

중복은 코드 길이가 늘어날 뿐 아니라 알고리즘이 변하면 여러 군데를 손 봐야 한다. 소프트웨어의 많은 원칙과 기법이 중복을 없애거나 제어할 목적으로 나왔다. 관계형 데이터베이스의 정규형식은 중복을 제거할 목적으로 만들어졌고 객체지향 프로그래밍은 코드를 부모 클래스로 몰아 중복을 없앤다. 구조적 프로그래밍, AOP, COP 모두 중복 제거 전략의 일종이다. 중복은 소프트웨어이서 모든 악의 근원이다. 



#### 결론

모든 시스템은 프로그래머가 설계한 '도메인 특화 언어'이다. 함수는 그 언어에서 동사고 클래스는 명사다. 프로그래밍 기술은 언어 설계의 기술이다. 시스템에서 발생하는 모든 동작을 설명하는 함수 계층이 그 언어이다. 이 장의 함수를 잘 만드는 규칙을 잘 따른다면 길이가 짧고, 이름이 좋고, 체계가 잡힌 함수를 만들 수 있다. 하지만 진짜 목표는 시스템이라는 이야기를 풀어가는데에 있다. 작성하는 함수가 분명하고 정확한 언어로 깔끔하게 맞아 떨어져야 이야기를 풀어가기가 쉬워진다. 



### 4. 주석







(To be continued ... )



